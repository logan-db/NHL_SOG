# The main pipeline for nhlPredict
resources:
  pipelines:
    NHLPlayerIngestion:
      name: NHLPlayerIngestion
      target: ${bundle.environment}
      continuous: false
      channel: PREVIEW
      photon: true
      libraries:
        - notebook:
            path: ../src/dlt_etl/ingestion/01-bronze-ingestion.py
        - notebook:
            path: ../src/dlt_etl/transformation/02-silver-transform.py
        - notebook:
            path: ../src/dlt_etl/aggregation/03-gold-agg.py
      serverless: true
      catalog: lr_nhl_demo
      configuration:
        bundle.sourcePath: ${workspace.file_path}/src
        tmp_base_path: /Volumes/lr_nhl_demo/dev/
        base_shots_download_url: https://peter-tanner.com/moneypuck/downloads/
        base_download_url: https://moneypuck.com/moneypuck/playerData/seasonSummary/2024/regular/
        games_download_url: https://moneypuck.com/moneypuck/playerData/careers/gameByGame/all_teams.csv
        player_games_url: https://moneypuck.com/moneypuck/playerData/careers/gameByGame/regular/skaters/
        one_time_load: "true"
        season_list: "[2023, 2024, 2025]"
        player_playoff_games_url: https://moneypuck.com/moneypuck/playerData/careers/gameByGame/playoffs/skaters/
      root_path: /Workspace/Users/logan.rupert@databricks.com/.bundle/nhlPredict/dev/files/src/dlt_etl
